<!-- yes.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>For My Love</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="container">
      <div
        class="tenor-gif-embed"
        data-postid="253027946666209433"
        data-share-method="host"
        data-aspect-ratio="1.37853"
        data-width="100%"
      >
        <a
          href="https://tenor.com/view/mochi-cat-mochi-and-goma-goma-and-peach-mochi-mochi-peach-cat-gif-gif-253027946666209433"
          >Mochi Cat GIF</a
        >from <a href="https://tenor.com/search/mochi-gifs">Mochi GIFs</a>
      </div>
      <script
        type="text/javascript"
        async
        src="https://tenor.com/embed.js"
      ></script>
      <h1>Hehehehe, I knew it! ðŸ˜˜ I Love You Always Forever ðŸ’œ</h1>
    </div>

    <script>
      // Check if the music flag is set in localStorage
      if (localStorage.getItem('playMusic') === 'true') {
        // Background Music with Smooth Fade-In
        document.addEventListener("DOMContentLoaded", function () {
          let audio = document.createElement("audio");
          audio.id = "background-music";
          audio.loop = true;
          audio.volume = 0.0; // Start muted to avoid autoplay restrictions

          let source = document.createElement("source");
          source.src = "assets/teenage_dream.mp3"; // Corrected file name
          source.type = "audio/mpeg";

          audio.appendChild(source);
          document.body.appendChild(audio);

          // Ensure audio loads properly
          audio.load();

          // Add a user interaction event for autoplay
          function startMusic() {
            if (audio.paused) {
              audio.play().then(() => {
                let volume = 0.0;
                let fadeIn = setInterval(function () {
                  if (volume < 1.0) {
                    volume += 0.05; // Adjust fade speed
                    audio.volume = volume.toFixed(2);
                  } else {
                    clearInterval(fadeIn);
                  }
                }, 200);
              }).catch(error => console.log("Autoplay blocked:", error));
            }
          }

          // Start music immediately on final page load
          startMusic();
        });
      }
    </script>
  </body>
</html>
